---
/**
 * MobileDrawer.astro
 *
 * Reusable mobile drawer component with:
 * - Slide-in animation from left or right
 * - Header with title and close button
 * - Scrollable content area
 * - Focus trapping (handled by BaseLayout script)
 *
 * Note: Drawer open/close logic is centralized in BaseLayout.astro
 * This component provides the structure and styling.
 */

 interface Props {
  /** Unique ID for the drawer element */
  id: string;
  /** Title displayed in the drawer header */
  title: string;
  /** Which side the drawer slides from */
  side: 'left' | 'right';
  /** Accessible label for the drawer */
  ariaLabel: string;
}

const { id, title, side, ariaLabel } = Astro.props;

const drawerClass = side === 'left' ? 'drawer-left' : 'drawer-right';
---

<div
  id={id}
  class:list={['drawer', drawerClass, 'custom-scrollbar']}
  role="dialog"
  aria-modal="true"
  aria-label={ariaLabel}
>
  <div class="drawer-header">
    <span class="font-display text-lg">{title}</span>
    <button
      type="button"
      class="drawer-close theme-toggle"
      aria-label={`Close ${title.toLowerCase()}`}
      data-close-drawer={side}
    >
      <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>
  </div>
  <div class="drawer-body">
    <slot />
  </div>
</div>

<style>
  .drawer-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    border-bottom: 1px solid var(--color-border);
    position: sticky;
    top: 0;
    background-color: var(--color-bg-primary);
    z-index: 1;
  }

  .drawer-body {
    padding: 1rem;
  }

  .drawer-close {
    flex-shrink: 0;
  }
</style>