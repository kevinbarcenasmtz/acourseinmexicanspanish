---
/**
 * TocItem.astro
 *
 * Individual Table of Contents item with:
 * - Depth-based indentation (h1=1, h2=2, h3=3, h4=4)
 * - Visual states per spec 4.5:
 *   - Default: Muted text
 *   - Hover: Primary text color
 *   - Active: Accent color, bold
 *
 * @see ui-ux-requirements.md Section 4 - Right Sidebar
 */

 interface Props {
  /** The anchor href (e.g., "#section-id") */
  href: string;
  /** Display text for the ToC item */
  text: string;
  /** Heading depth (1-4) for indentation */
  depth: 1 | 2 | 3 | 4;
  /** Whether this item is currently active */
  isActive?: boolean;
}

const { href, text, depth, isActive = false } = Astro.props;
---

<a
  href={href}
  class:list={['toc-item', { active: isActive }]}
  data-depth={depth}
  data-toc-link
>
  {text}
</a>

<style>
  .toc-item {
    display: block;
    padding: 0.375rem 0.75rem;
    font-size: var(--text-small);
    color: var(--color-text-secondary);
    text-decoration: none;
    line-height: 1.4;
    border-radius: 0.25rem;
    transition:
      color var(--transition-fast),
      background-color var(--transition-fast);
  }

  .toc-item:hover {
    color: var(--color-text-primary);
    background-color: var(--color-bg-tertiary);
    text-decoration: none;
  }

  .toc-item:focus-visible {
    outline: none;
    background-color: var(--color-bg-tertiary);
    color: var(--color-text-primary);
  }

  .toc-item.active {
    color: var(--color-accent);
    font-weight: 600;
    background-color: var(--color-accent-bg);
  }

  /* Depth-based indentation */
  .toc-item[data-depth='1'] {
    padding-left: 0.75rem;
    font-weight: 600;
  }

  .toc-item[data-depth='2'] {
    padding-left: 1rem;
  }

  .toc-item[data-depth='3'] {
    padding-left: 1.5rem;
  }

  .toc-item[data-depth='4'] {
    padding-left: 2rem;
    font-size: calc(var(--text-small) * 0.95);
  }

  /* Active state maintains bold regardless of depth */
  .toc-item.active[data-depth='1'],
  .toc-item.active[data-depth='2'],
  .toc-item.active[data-depth='3'],
  .toc-item.active[data-depth='4'] {
    font-weight: 600;
  }
</style>